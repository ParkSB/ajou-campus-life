# Student

## 개요

학생의 학번, 이름 데이터를 관리하는 프로그램. 데이터 추가, 수정, 조회가 가능하다.

- 추가: 2번 메뉴. 학번과 이름을 입력하면 student.data 파일에 데이터가 추가할 수 있다.
- 수정: 2번 메뉴. student.data 파일에 있는 학번을 입력하고 새로운 이름을 입력하면 해당 학번 학생의 이름을 수정할 수 있다.
- 조회: 1번 메뉴. 학번을 입력하면 해당하는 학생의 이름을 조회할 수 있다.

### 프로그램 구조

전체 프로그램 구조를 도식화하면 다음 그림과 같다.

![program structure](https://user-images.githubusercontent.com/6410412/56424469-5f774780-62eb-11e9-9a61-d12fd6b205ac.png)

- child와 parent사이에 사용자의 메뉴 선택, 학번, 이름 데이터를 전달하기 위한 파이프를 생성한다. `p[0]`은 read, `p[1]`은 write 전용으로 사용한다.
- fork를 수행한다. parent는 client가 되고, child는 server가 된다. client는 사용자에게 메뉴를 출력하고 입력을 받으며, server는 client로부터 파이프를 통해 사용자가 입력한 데이터를 전달받아 명령을 처리한다.
- server는 명령에 따라 학생 데이터가 담긴 student.data 파일을 쓰고 읽는다.
 
### 실행 흐름

전체 실행 흐름을 도식화하면 다음 그림과 같다.
 
![flowchart](https://user-images.githubusercontent.com/6410412/56424466-5c7c5700-62eb-11e9-9e36-f59ada750f3c.png)

- 점선은 파이프를 통한 데이터 송수신을 의미하며, 수신부는 송신을 기다린다.
- 사용자의 선택에 따라client는 사용자로부터 정보를 입력 받고 server로 전달한다.
- server는 작업을 수행하고, 그에 따른 결과 메시지를 client로 전달한다. 이때 잘못된 명령에 대해서는 적절한 오류 메시지를 전달한다.
 
## 동작 시험 결과
 
1. 데이터 추가: 2번 메뉴를 선택해 학번과 이름을 입력하고 새 데이터를 추가했다. server는 r모드로 파일을 열어 기존에 같은 학번이 있는지 확인했고, 기존 데이터가 없으므로 a모드로 다시 파일을 열어 데이터를 추가했다.
 
1. 데이터 탐색: 1번 메뉴를 선택해 앞서 추가한 학번을 탐색했다. server는 r모드로 파일을 열어 데이터를 찾았고, 입력한 학번에 대응하는 이름을 결과 메시지로 출력했다.
 
1. 데이터 수정: 2번 메뉴를 선택해 앞서 추가한 학번과 새로운 이름을 입력했다. server는 r모드로 파일을 열어 입력한 학번과 같은 학번을 탐색했고, w모드로 다시 파일을 열어 입력한 학번과 그에 대응하는 이름을 제외한 모든 기존 데이터를 새로운 파일에 복사해 기존 파일을 덮어썼다. 그리고 a모드로 파일을 열어 입력한 학번과 이름을 추가했다.
 
1. 존재하지 않는 학생 데이터 탐색: 1번 메뉴를 선택해 파일에 존재하지 않는 학번을 입력했다. server는 r모드로 파일을 열어 입력한 학번이 존재하는지 탐색했고, 찾지 못했음을 결과 메시지로 출력했다.
  
1. 잘못된 선택지 입력: 정의되지 않은 명령을 입력해 오류 메시지를 출력했다. 문자열 형식으로 입력을 받아 숫자가 아닌 값을 입력해도 정상적으로 예외 처리되도록 했다.
 
1. 파일 열기 실패: 코드 상에서 파일 이름을 다르게 설정해 파일을 여는 과정에서 오류가 발생했고, 프로그램을 종료시켰다.
 
1. 일반적인 상황: 일반적인 사용 상황을 가정하고 연속적인 추가, 탐색, 수정을 반복했다. 모두 정상적으로 작동했다.

## 개선 요구사항

- 데이터 삭제: 데이터 생성, 업데이트는 가능하지만 삭제 기능이 없어 기본적인 CRUD 구현이 완벽하지 않은 상태다.
- 전체 데이터 조회: 매번 메인 메뉴와 탐색 메뉴를 오가는 것이 사용성을 저해한다. 파일의 모든 데이터를 출력해 조회할 수 있는 기능이 필요하다.
- 복수 데이터 입력: 추가 메뉴에서 여러 개의 데이터를 입력하는 기능이 필요하다. 
- 뒤로 가기: 메뉴를 잘못 선택했을 경우 이전 메뉴로 돌아갈 수 있는 기능이 필요하다.
- 식별 번호: 학번, 이름만이 아니라 프로그램 내에서 사용하기 위한 고유 식별 번호를 저장할 필요가 있다. 현재 이름을 수정할 경우엔 학번을 입력하면 되지만, 학번을 수정할 방법은 없으므로 식별 번호를 입력해 이름 또는 학번을 수정할 수 있도록 구현해야 한다.
- 대기 시간 절감: 프로세스간 동기화를 위해 usleep 함수를 사용하여 잠시 프로그램을 정지시키는 코드를 삽입했다. 체감할 정도의 대기 시간이 소요되지는 않지만, 구동 환경에 따라 그 결과가 다를 것으로 우려된다. 또한 프로그래머가 정지 시점을 의식하고 있어야 하기 때문에 유지보수를 다소 번거롭게 만드는 요인으로 작용하고 있다. 개선 방향을 모색할 필요가 있어 보인다.
